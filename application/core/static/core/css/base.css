/* === BASE GLOBAL STYLES (refactored to your palette) === */

/* Your theme tokens */
:root {
  /* Brand + accents */
  --primary-500:#283d3b;
  --primary-600:#197278;
  --primary-700:#edddd4;
  --cyan:#48dbfb;
  --danger:#ff4757;
  --success:#1dd1a1;

  /* Text scale */
  --text-900:#333;
  --text-700:#666;
  --text-500:#999;

  /* Surfaces */
  --border:#e0e0e0;
  --bg-soft:#f8f9fa;
  --chip-bg:#f0f4ff;

  /* ===== App tokens mapped to your colors ===== */
  --bg:var(--bg-soft);
  --card:#ffffff;
  --text:var(--text-900);
  --muted:var(--text-700);
  /* keep name for existing components */
  --surface-subtle:var(--chip-bg);

  /* borders & motion */
  --radius:12px;
  --shadow:0 1px 2px rgba(0,0,0,.04), 0 8px 24px rgba(0,0,0,.06);
  --trans:180ms cubic-bezier(.2,.8,.2,1);

  /* Link / action blues -> use your cyan */
  --blue:var(--cyan);
  --blue-600:var(--cyan);
  --blue-500:var(--cyan);

  /* Status colors derived from your danger/success */
  --neg-bg: color-mix(in srgb, var(--danger) 14%, white);
  --neg-fg: var(--danger);
  --pos-bg: color-mix(in srgb, var(--success) 14%, white);
  --pos-fg: var(--success);

  /* Optional grayscale & utility tokens kept for compatibility */
  --gray-50:#f9fafb; --gray-100:#f3f4f6; --gray-200:#e5e7eb; --gray-300:#d1d5db;
  --gray-400:#9ca3af; --gray-500:#6b7280; --gray-600:#4b5563; --gray-700:#374151;
  --gray-800:#1f2937; --gray-900:#111827;

  /* If any components still reference these, map them sensibly */
  --red-50: color-mix(in srgb, var(--danger) 10%, white);
  --red-600: var(--danger);
  --green-50: color-mix(in srgb, var(--success) 10%, white);
  --green-600: var(--success);

  /* Legacy “yellow” tokens remapped to your warm neutral */
  --yellow-100: color-mix(in srgb, var(--primary-700) 24%, white);
  --yellow-800:#92400e; /* keep for contrasty text; override if desired */
}

/* === Dark mode (accessible + palette-true) === */
.dark {
  /* Base surfaces (teal-tinted charcoal) */
  --bg: color-mix(in srgb, black 82%, var(--primary-500) 18%);     /* ~#101618 */
  --card: color-mix(in srgb, black 72%, var(--primary-500) 28%);   /* a step up from bg */
  --surface-subtle: color-mix(in srgb, var(--primary-500) 22%, transparent);

  /* Text & muted (≥ 13:1 and ~4.5:1 on card/bg) */
  --text: color-mix(in srgb, white 94%, var(--primary-700) 6%);
  --muted: color-mix(in srgb, var(--text) 65%, transparent);

  /* Borders & depth (light, non-chalky) */
  --border: color-mix(in srgb, white 12%, transparent);
  --shadow: 0 .5px 0 rgba(0,0,0,.5), 0 8px 28px rgba(0,0,0,.65);

  /* Action/link blues pulled from your cyan, slightly softened */
  --blue: color-mix(in srgb, var(--cyan) 86%, white 14%);
  --blue-600: var(--blue);
  --blue-500: var(--blue);

  /* Status chips readable on dark */
  --neg-bg: color-mix(in srgb, var(--danger) 24%, transparent);
  --neg-fg: color-mix(in srgb, white 92%, var(--danger) 8%);
  --pos-bg: color-mix(in srgb, var(--success) 24%, transparent);
  --pos-fg: color-mix(in srgb, white 92%, var(--success) 8%);
}

/* Prefer system dark automatically (keeps your .dark toggle working too) */
@media (prefers-color-scheme: dark){
  :root:not(.dark-disabled){ color-scheme: dark; }
}

/* Dark-mode controls & affordances */
.dark a{ color: var(--blue); }
.dark a:hover{ filter: brightness(1.1); }

.dark input,
.dark textarea,
.dark select{
  background: color-mix(in srgb, var(--card) 96%, black 4%);
  border:1px solid var(--border);
  color:var(--text);
}

.dark ::placeholder{ color: color-mix(in srgb, var(--muted) 70%, transparent); }

.dark .chip,
.dark [data-surface="subtle"]{
  background: var(--surface-subtle);
  border:1px solid color-mix(in srgb, var(--border) 60%, transparent);
}

/* Focus ring that’s visible on dark and light */
:where(button, a, input, textarea, select):focus-visible{
  outline:2px solid color-mix(in srgb, var(--blue) 80%, white 10%);
  outline-offset:2px;
}

/* “New Bill / Return to Past Bills” button in dark: brighter, crisp */
.dark #toggle-create.btn{
  background: color-mix(in srgb, var(--cyan) 85%, white 5%);
  color:#fff;
  border-color: transparent;
}
.dark #toggle-create.btn:hover{
  filter: brightness(1.08);
  transform: translateY(-1px);
}

/* === RESET & GLOBAL FIXES === */
*{ box-sizing:border-box }

html,body{ height:100% }
html{ overflow-x:hidden }
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,'Apple Color Emoji','Segoe UI Emoji';
  overflow-x:hidden;
}

/* Flex/Grid child shrink fix */
.row > *{ min-width:0 }

/* Responsive media */
img, video, canvas, svg{ max-width:100%; height:auto }

/* Prevent long text overflow */
*{ overflow-wrap:anywhere }

/* === Home "New Bill" / "Return to Past Bills" button === */
#toggle-create.btn {
  background: var(--cyan);
  color: #fff;
  border-color: transparent;
  font-weight: 600;
  transition: all var(--trans);
}
#toggle-create.btn:hover {
  filter: brightness(1.05);
  transform: translateY(-1px);
}
.dark #toggle-create.btn {
  background: color-mix(in srgb, var(--cyan) 85%, white 5%);
  color: #fff;
}
